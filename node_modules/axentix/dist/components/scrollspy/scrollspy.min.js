var X=Object.defineProperty;var Z=(o,n,r)=>n in o?X(o,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[n]=r;var O=(o,n,r)=>(Z(o,typeof n!="symbol"?n+"":n,r),r),k=(o,n,r)=>{if(!n.has(o))throw TypeError("Cannot "+r)};var l=(o,n,r)=>(k(o,n,"read from private field"),r?r.call(o):n.get(o)),p=(o,n,r)=>{if(n.has(o))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(o):n.set(o,r)},m=(o,n,r,w)=>(k(o,n,"write to private field"),w?w.call(o,r):n.set(o,r),r);var y=(o,n,r)=>(k(o,n,"access private method"),r);(function(o,n){typeof exports=="object"&&typeof module!="undefined"?module.exports=n():typeof define=="function"&&define.amd?define(n):(o=typeof globalThis!="undefined"?globalThis:o||self,o.Scrollspy=n())})(this,function(){var g,h,x,d,v,G,C,J,E,K,b,Q,S,V,A,q;"use strict";const o=[],n={components:[],plugins:[],prefix:"ax",mode:""},r=s=>n.components.find(t=>t.name===s).class,w=()=>{const s=n.components.filter(e=>e.dataDetection),t=n.plugins.filter(e=>e.dataDetection);return[...s,...t].map(e=>e.name)},M=(s,t)=>{if(!s.name||!s.class){console.error(`[Axentix] Error registering ${t} : Missing required parameters.`);return}if(n[t].some(e=>e.name===s.name)){console.error(`[Axentix] Error registering ${t} : Already exist.`);return}s.autoInit&&(s.autoInit.selector=s.autoInit.selector+=":not(.no-axentix-init)"),n[t].push(s)},B=s=>{M(s,"components")},R=s=>s.replace(/[\w]([A-Z])/g,t=>t[0]+"-"+t[1]).toLowerCase(),$=(s,t="")=>{const e=R(s);return t?t+"-"+e:e},H=(s,t,e,i,a="")=>{const c=t[0].toUpperCase()+t.slice(1).toLowerCase();w().includes(c)&&e!=="Collapsible"&&c!=="Sidenav"&&(s[t]=r(c).getDefaultOptions());const f=a?a+"-"+t:t,u=I(s[t],e,i,f);if(!(Object.keys(u).length===0&&s.constructor===Object))return u},I=(s,t,e,i="")=>Object.keys(s).reduce((a,c)=>{if(typeof s[c]=="object"&&s[c]!==null){const f=H(s,c,t,e,i);f&&(a[c]=f)}else if(s[c]!==null){const f="data-"+t.toLowerCase()+"-"+$(c,i);if(e.hasAttribute(f)){const u=e.getAttribute(f);a[c]=typeof s[c]=="number"?Number(u):u,typeof s[c]=="boolean"&&(a[c]=u==="true")}}return a},{}),N=(s,t)=>{const e=Object.assign({},r(s).getDefaultOptions());return I(e,s,t)},U=()=>{document.querySelectorAll("[data-ax]").forEach(t=>{let e=t.dataset.ax;if(e=e[0].toUpperCase()+e.slice(1).toLowerCase(),!w().includes(e)){console.error(`[Axentix] Error: ${e} component doesn't exist. 
 Did you forget to register him ?`,t);return}try{const i=r(e);new i(`#${t.id}`)}catch(i){console.error("[Axentix] Data: Unable to load "+e,i)}})},z=()=>{try{new Axentix.Axentix("all")}catch(s){console.error("[Axentix] Unable to auto init.",s)}};document.addEventListener("DOMContentLoaded",()=>{document.documentElement.dataset.axentix&&z(),U()});const T=(...s)=>s.reduce((t,e)=>{for(let i in e)t[i]=typeof e[i]=="object"&&e[i]!==null?T(t[i],e[i]):e[i];return t},{}),F=(s,t,e)=>T(r(s).getDefaultOptions(),N(s,e),t),L=(s,t,e)=>{const i=new CustomEvent("ax."+t,{detail:e||{},bubbles:!0});s.dispatchEvent(i)},Y=s=>{const t=o.find(e=>e.type!=="Toast"&&"#"+e.instance.el.id===s);return t?t.instance:!1};class P{constructor(){O(this,"el")}removeListeners(){}setupListeners(){}setup(){}preventDbInstance(t){if(t&&Y(t))throw new Error(`Instance already exist on ${t}`)}sync(){L(this.el,"component.sync"),this.removeListeners(),this.setupListeners()}reset(){L(this.el,"component.reset"),this.removeListeners(),this.setup()}destroy(){L(this.el,"component.destroy"),this.removeListeners();const t=o.findIndex(e=>e.instance.el.id===this.el.id);o.splice(t,1)}}const W={offset:200,linkSelector:"a",classes:"active",auto:{enabled:!1,classes:"",selector:""}};class D extends P{constructor(t,e){super();p(this,v);p(this,C);p(this,E);p(this,b);p(this,S);p(this,A);O(this,"options");p(this,g,void 0);p(this,h,void 0);p(this,x,void 0);p(this,d,void 0);try{this.preventDbInstance(t),o.push({type:"ScrollSpy",instance:this}),this.el=document.querySelector(t),this.options=F("ScrollSpy",e,this.el),this.setup()}catch(i){console.error("[Axentix] ScrollSpy init error",i)}}setup(){L(this.el,"scrollspy.setup"),this.options.auto.enabled?y(this,C,J).call(this):y(this,v,G).call(this),typeof this.options.classes=="string"&&(this.options.classes=this.options.classes.split(" ")),m(this,g,""),this.setupListeners(),y(this,A,q).call(this)}setupListeners(){m(this,h,y(this,A,q).bind(this)),window.addEventListener("scroll",l(this,h)),window.addEventListener("resize",l(this,h))}removeListeners(){window.removeEventListener("scroll",l(this,h)),window.removeEventListener("resize",l(this,h)),m(this,h,void 0)}}return g=new WeakMap,h=new WeakMap,x=new WeakMap,d=new WeakMap,v=new WeakSet,G=function(){m(this,x,Array.from(this.el.querySelectorAll(this.options.linkSelector))),m(this,d,l(this,x).map(t=>document.querySelector(t.getAttribute("href"))))},C=new WeakSet,J=function(){m(this,d,Array.from(document.querySelectorAll(this.options.auto.selector))),m(this,x,l(this,d).map(t=>{const e=document.createElement("a");return e.className=this.options.auto.classes,e.setAttribute("href","#"+t.id),e.innerHTML=t.innerHTML,this.el.appendChild(e),e}))},E=new WeakSet,K=function(){const t=window.scrollY,e=window.scrollX,i=window.innerWidth,a=window.innerHeight,c=t+this.options.offset;return a+t>=document.body.offsetHeight-2?l(this,d)[l(this,d).length-1]:l(this,d).find(f=>{const u=f.getBoundingClientRect();return u.top+t>=t&&u.left+e>=e&&u.right<=i&&u.bottom<=a&&u.top+t<=c})},b=new WeakSet,Q=function(){!l(this,g)||this.options.classes.forEach(t=>l(this,g).classList.remove(t))},S=new WeakSet,V=function(){const t=window.scrollY;return l(this,d).reduce((e,i)=>{const a=i.getBoundingClientRect().top+t,c=e.getBoundingClientRect().top+t;return a>t+this.options.offset?e:Math.abs(a-t)<Math.abs(c-t)?i:e})},A=new WeakSet,q=function(){let t=y(this,E,K).call(this);t||(t=y(this,S,V).call(this));const e=l(this,x).find(i=>i.getAttribute("href").split("#")[1]===t.id);e!==l(this,g)&&(L(this.el,"scrollspy.update"),y(this,b,Q).call(this),this.options.classes.forEach(i=>e.classList.add(i)),m(this,g,e))},O(D,"getDefaultOptions",()=>W),B({class:D,name:"ScrollSpy",dataDetection:!0,autoInit:{enabled:!0,selector:".scrollspy"}}),D});

var $t=Object.defineProperty;var kt=(h,a,c)=>a in h?$t(h,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):h[a]=c;var K=(h,a,c)=>(kt(h,typeof a!="symbol"?a+"":a,c),c),ot=(h,a,c)=>{if(!a.has(h))throw TypeError("Cannot "+c)};var i=(h,a,c)=>(ot(h,a,"read from private field"),c?c.call(h):a.get(h)),o=(h,a,c)=>{if(a.has(h))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(h):a.set(h,c)},n=(h,a,c,g)=>(ot(h,a,"write to private field"),g?g.call(h,c):a.set(h,c),c),at=(h,a,c,g)=>({set _(Q){n(h,a,Q,c)},get _(){return i(h,a,g)}}),r=(h,a,c)=>(ot(h,a,"access private method"),c);(function(h,a){typeof exports=="object"&&typeof module!="undefined"?module.exports=a():typeof define=="function"&&define.amd?define(a):(h=typeof globalThis!="undefined"?globalThis:h||self,h.Caroulix=a())})(this,function(){var w,L,d,C,M,T,S,D,v,N,O,b,E,A,R,$,k,m,H,U,f,Y,u,V,Pt,_,Mt,B,dt,y,z,X,rt,j,St,tt,Nt,et,Xt,it,qt,st,Ft,W,ut,Z,pt,G,ft,q,ht,J,vt;"use strict";var h="";const a=[],c={components:[],plugins:[],prefix:"ax",mode:""},g=s=>c.components.find(t=>t.name===s).class,Q=()=>{const s=c.components.filter(e=>e.dataDetection),t=c.plugins.filter(e=>e.dataDetection);return[...s,...t].map(e=>e.name)},xt=(s,t)=>{if(!s.name||!s.class){console.error(`[Axentix] Error registering ${t} : Missing required parameters.`);return}if(c[t].some(e=>e.name===s.name)){console.error(`[Axentix] Error registering ${t} : Already exist.`);return}s.autoInit&&(s.autoInit.selector=s.autoInit.selector+=":not(.no-axentix-init)"),c[t].push(s)},gt=s=>{xt(s,"components")},mt=s=>s.replace(/[\w]([A-Z])/g,t=>t[0]+"-"+t[1]).toLowerCase(),yt=(s,t="")=>{const e=mt(s);return t?t+"-"+e:e},Lt=(s,t,e,l,x="")=>{const p=t[0].toUpperCase()+t.slice(1).toLowerCase();Q().includes(p)&&e!=="Collapsible"&&p!=="Sidenav"&&(s[t]=g(p).getDefaultOptions());const P=x?x+"-"+t:t,F=lt(s[t],e,l,P);if(!(Object.keys(F).length===0&&s.constructor===Object))return F},lt=(s,t,e,l="")=>Object.keys(s).reduce((x,p)=>{if(typeof s[p]=="object"&&s[p]!==null){const P=Lt(s,p,t,e,l);P&&(x[p]=P)}else if(s[p]!==null){const P="data-"+t.toLowerCase()+"-"+yt(p,l);if(e.hasAttribute(P)){const F=e.getAttribute(P);x[p]=typeof s[p]=="number"?Number(F):F,typeof s[p]=="boolean"&&(x[p]=F==="true")}}return x},{}),bt=(s,t)=>{const e=Object.assign({},g(s).getDefaultOptions());return lt(e,s,t)},Et=()=>{document.querySelectorAll("[data-ax]").forEach(t=>{let e=t.dataset.ax;if(e=e[0].toUpperCase()+e.slice(1).toLowerCase(),!Q().includes(e)){console.error(`[Axentix] Error: ${e} component doesn't exist. 
 Did you forget to register him ?`,t);return}try{const l=g(e);new l(`#${t.id}`)}catch(l){console.error("[Axentix] Data: Unable to load "+e,l)}})},It=()=>{try{new Axentix.Axentix("all")}catch(s){console.error("[Axentix] Unable to auto init.",s)}};document.addEventListener("DOMContentLoaded",()=>{document.documentElement.dataset.axentix&&It(),Et()});const ct=(...s)=>s.reduce((t,e)=>{for(let l in e)t[l]=typeof e[l]=="object"&&e[l]!==null?ct(t[l],e[l]):e[l];return t},{}),wt=(s,t,e)=>ct(g(s).getDefaultOptions(),bt(s,e),t),I=(s,t,e)=>{const l=new CustomEvent("ax."+t,{detail:e||{},bubbles:!0});s.dispatchEvent(l)},Ct=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,Tt=()=>!!window.PointerEvent&&"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>=0,Dt=()=>Ct()?"touch":Tt()?"pointer":"mouse",Ot=s=>{const t=a.find(e=>e.type!=="Toast"&&"#"+e.instance.el.id===s);return t?t.instance:!1};class At{constructor(){K(this,"el")}removeListeners(){}setupListeners(){}setup(){}preventDbInstance(t){if(t&&Ot(t))throw new Error(`Instance already exist on ${t}`)}sync(){I(this.el,"component.sync"),this.removeListeners(),this.setupListeners()}reset(){I(this.el,"component.reset"),this.removeListeners(),this.setup()}destroy(){I(this.el,"component.destroy"),this.removeListeners();const t=a.findIndex(e=>e.instance.el.id===this.el.id);a.splice(t,1)}}const Rt={animationDuration:500,height:"",backToOpposite:!0,enableTouch:!0,indicators:{enabled:!1,isFlat:!1,customClasses:""},autoplay:{enabled:!0,interval:5e3,side:"right"}};class nt extends At{constructor(t,e){super();o(this,V);o(this,_);o(this,B);o(this,y);o(this,X);o(this,j);o(this,tt);o(this,et);o(this,it);o(this,st);o(this,W);o(this,Z);o(this,G);o(this,q);o(this,J);K(this,"options");K(this,"activeIndex");o(this,w,0);o(this,L,!1);o(this,d,void 0);o(this,C,0);o(this,M,0);o(this,T,!1);o(this,S,!1);o(this,D,!1);o(this,v,0);o(this,N,0);o(this,O,void 0);o(this,b,void 0);o(this,E,void 0);o(this,A,void 0);o(this,R,void 0);o(this,$,void 0);o(this,k,void 0);o(this,m,void 0);o(this,H,0);o(this,U,0);o(this,f,void 0);o(this,Y,void 0);o(this,u,void 0);try{this.preventDbInstance(t),a.push({type:"Caroulix",instance:this}),this.el=document.querySelector(t),this.options=wt("Caroulix",e,this.el),this.setup()}catch(l){console.error("[Axentix] Caroulix init error",l)}}setup(){I(this.el,"caroulix.setup"),this.options.autoplay.side=this.options.autoplay.side.toLowerCase(),["right","left"].includes(this.options.autoplay.side)||(this.options.autoplay.side="right"),this.activeIndex=0,n(this,w,0),n(this,L,!1),n(this,u,Dt()),n(this,d,r(this,V,Pt).call(this)),this.options.indicators.enabled&&r(this,it,qt).call(this);const e=this.el.querySelector(".active");e?this.activeIndex=i(this,d).indexOf(e):i(this,d)[0].classList.add("active"),r(this,_,Mt).call(this),i(this,C)===0&&r(this,X,rt).call(this),this.setupListeners(),this.options.autoplay.enabled&&this.play()}setupListeners(){n(this,O,r(this,X,rt).bind(this)),window.addEventListener("resize",i(this,O)),i(this,E)&&(n(this,A,this.next.bind(this,1)),i(this,E).addEventListener("click",i(this,A))),i(this,b)&&(n(this,R,this.prev.bind(this,1)),i(this,b).addEventListener("click",i(this,R))),this.options.enableTouch&&(n(this,$,r(this,j,St).bind(this)),n(this,k,r(this,tt,Nt).bind(this)),n(this,m,r(this,et,Xt).bind(this)),this.el.addEventListener(`${i(this,u)}${i(this,u)==="touch"?"start":"down"}`,i(this,$)),this.el.addEventListener(`${i(this,u)}move`,i(this,k)),this.el.addEventListener(`${i(this,u)}${i(this,u)==="touch"?"end":"up"}`,i(this,m)),this.el.addEventListener(i(this,u)==="pointer"?"pointerleave":"mouseleave",i(this,m)))}removeListeners(){window.removeEventListener("resize",i(this,O)),n(this,O,void 0),i(this,E)&&(i(this,E).removeEventListener("click",i(this,A)),n(this,A,void 0)),i(this,b)&&(i(this,b).removeEventListener("click",i(this,R)),n(this,R,void 0)),this.options.enableTouch&&(this.el.removeEventListener(`${i(this,u)}${i(this,u)==="pointer"?"down":"start"}`,i(this,$)),this.el.removeEventListener(`${i(this,u)}move`,i(this,k)),this.el.removeEventListener(`${i(this,u)}${i(this,u)==="touch"?"end":"up"}`,i(this,m)),this.el.removeEventListener(i(this,u)==="pointer"?"pointerleave":"mouseleave",i(this,m)),n(this,$,void 0),n(this,k,void 0),n(this,m,void 0))}goTo(t){if(t===this.activeIndex)return;(t>this.activeIndex?"right":"left")==="left"?this.prev(Math.abs(this.activeIndex-t)):this.next(Math.abs(this.activeIndex-t)),this.options.indicators.enabled&&r(this,W,ut).call(this)}play(){!this.options.autoplay.enabled||(this.stop(),n(this,Y,setInterval(()=>{this.options.autoplay.side==="right"?this.next(1,!1):this.prev(1,!1)},this.options.autoplay.interval)))}stop(){!this.options.autoplay.enabled||clearInterval(i(this,Y))}next(t=1,e=!0){i(this,T)||this.activeIndex===i(this,d).length-1&&!this.options.backToOpposite||(I(this.el,"caroulix.next",{step:t}),n(this,L,!0),e&&this.options.autoplay.enabled&&this.stop(),this.activeIndex<i(this,d).length-1?this.activeIndex+=t:this.options.backToOpposite&&(this.activeIndex=0),r(this,J,vt).call(this),r(this,y,z).call(this),e&&this.options.autoplay.enabled&&this.play())}prev(t=1,e=!0){i(this,T)||this.activeIndex===0&&!this.options.backToOpposite||(I(this.el,"caroulix.prev",{step:t}),n(this,L,!0),e&&this.options.autoplay.enabled&&this.stop(),this.activeIndex>0?this.activeIndex-=t:this.options.backToOpposite&&(this.activeIndex=i(this,d).length-1),r(this,J,vt).call(this),r(this,y,z).call(this),e&&this.options.autoplay.enabled&&this.play())}}return w=new WeakMap,L=new WeakMap,d=new WeakMap,C=new WeakMap,M=new WeakMap,T=new WeakMap,S=new WeakMap,D=new WeakMap,v=new WeakMap,N=new WeakMap,O=new WeakMap,b=new WeakMap,E=new WeakMap,A=new WeakMap,R=new WeakMap,$=new WeakMap,k=new WeakMap,m=new WeakMap,H=new WeakMap,U=new WeakMap,f=new WeakMap,Y=new WeakMap,u=new WeakMap,V=new WeakSet,Pt=function(){return Array.from(this.el.children).reduce((t,e)=>(e.classList.contains("caroulix-item")&&t.push(e),e.classList.contains("caroulix-prev")&&n(this,b,e),e.classList.contains("caroulix-next")&&n(this,E,e),t),[])},_=new WeakSet,Mt=function(){n(this,C,0),n(this,M,0),i(this,d).forEach(t=>{const e=t.querySelector("img, video");e&&(at(this,C)._++,e.complete?r(this,B,dt).call(this,e,!0):(e.loadRef=r(this,B,dt).bind(this,e),e.addEventListener("load",e.loadRef)))})},B=new WeakSet,dt=function(t,e){at(this,M)._++,e||(t.removeEventListener("load",t.loadRef),t.loadRef=void 0),i(this,C)==i(this,M)&&(r(this,X,rt).call(this),r(this,y,z).call(this,!0))},y=new WeakSet,z=function(t=!1){const e=this.el.getBoundingClientRect().width;i(this,d).forEach((x,p)=>{x.style.transform=`translateX(${e*p-e*this.activeIndex-i(this,w)}px)`}),this.options.indicators.enabled&&r(this,W,ut).call(this),i(this,d).find(x=>x.classList.contains("active")).classList.remove("active"),i(this,d)[this.activeIndex].classList.add("active"),setTimeout(()=>{n(this,L,!1)},this.options.animationDuration),t&&setTimeout(()=>r(this,q,ht).call(this,this.options.animationDuration),50)},X=new WeakSet,rt=function(){if(n(this,T,!0),this.el.style.transitionDuration="",this.options.autoplay.enabled&&this.play(),this.options.height)this.el.style.height=this.options.height;else{const t=i(this,d).map(l=>l.offsetHeight),e=Math.max(...t);this.el.style.height=e+"px"}r(this,y,z).call(this),setTimeout(()=>{this.el.style.transitionDuration=this.options.animationDuration+"ms",n(this,T,!1)},50)},j=new WeakSet,St=function(t){t.target.closest(".caroulix-arrow")||t.target.closest(".caroulix-indicators")||i(this,L)||(t.type!=="touchstart"&&t.preventDefault(),this.options.autoplay.enabled&&this.stop(),r(this,q,ht).call(this,0),n(this,D,!0),n(this,S,!1),n(this,v,0),n(this,N,0),n(this,H,r(this,Z,pt).call(this,t)),n(this,U,r(this,G,ft).call(this,t)))},tt=new WeakSet,Nt=function(t){if(!i(this,D)||i(this,S))return;let e=r(this,Z,pt).call(this,t),l=r(this,G,ft).call(this,t);if(n(this,v,i(this,H)-e),n(this,N,Math.abs(i(this,U)-l)),t.type==="touchmove"&&i(this,N)>Math.abs(i(this,v)))return n(this,S,!0),n(this,v,0),!1;t.cancelable&&t.preventDefault(),n(this,w,i(this,v)),r(this,y,z).call(this)},et=new WeakSet,Xt=function(t){if(!(t.target.closest(".caroulix-arrow")||t.target.closest(".caroulix-indicators"))&&(t.cancelable&&t.preventDefault(),i(this,D))){r(this,q,ht).call(this,this.options.animationDuration);let e=this.el.getBoundingClientRect().width;n(this,D,!1);const l=e*15/100;this.activeIndex!==i(this,d).length-1&&i(this,v)>l?this.next():this.activeIndex!==0&&i(this,v)<-l&&this.prev(),n(this,v,0),n(this,w,0),r(this,y,z).call(this),this.options.autoplay.enabled&&this.play()}},it=new WeakSet,qt=function(){n(this,f,document.createElement("ul")),i(this,f).classList.add("caroulix-indicators"),this.options.indicators.isFlat&&i(this,f).classList.add("caroulix-flat"),this.options.indicators.customClasses&&(i(this,f).className=`${i(this,f).className} ${this.options.indicators.customClasses}`);for(let t=0;t<i(this,d).length;t++){const e=document.createElement("li");e.triggerRef=r(this,st,Ft).bind(this,t),e.addEventListener("click",e.triggerRef),i(this,f).appendChild(e)}this.el.appendChild(i(this,f))},st=new WeakSet,Ft=function(t,e){e.preventDefault(),t!==this.activeIndex&&this.goTo(t)},W=new WeakSet,ut=function(){Array.from(i(this,f).children).forEach(t=>t.removeAttribute("class")),i(this,f).children[this.activeIndex].classList.add("active")},Z=new WeakSet,pt=function(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX},G=new WeakSet,ft=function(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY},q=new WeakSet,ht=function(t){this.el.style.transitionDuration=t+"ms"},J=new WeakSet,vt=function(){I(this.el,"caroulix.slide",{nextElement:i(this,d)[this.activeIndex],currentElement:i(this,d)[i(this,d).findIndex(t=>t.classList.contains("active"))]})},K(nt,"getDefaultOptions",()=>Rt),gt({class:nt,name:"Caroulix",dataDetection:!0,autoInit:{enabled:!0,selector:".caroulix"}}),nt});
